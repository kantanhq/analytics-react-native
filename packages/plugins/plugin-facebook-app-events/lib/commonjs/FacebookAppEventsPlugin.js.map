{"version":3,"names":["_analyticsReactNative","require","_reactNativeFbsdkNext","_screen","_interopRequireDefault","_parameterMapping","_utils","obj","__esModule","default","FB_PLUGIN_KEY","MAX_CHARACTERS_EVENT_NAME","mappedPropNames","generateMapTransform","mapEventProps","transformMap","isFBPluginSettings","settings","Object","keys","some","k","sanitizeEvent","event","properties","isObject","products","Array","isArray","productCount","isNumber","fb_num_items","length","params","key","values","includes","sanitized","sanitizeValue","undefined","_logTime","messageId","unknownToString","event_id","_appVersion","context","app","version","FacebookAppEventsPlugin","DestinationPlugin","type","PluginType","destination","trackScreens","limitedDataUse","appEvents","configure","analytics","adTrackingEnabled","get","onChange","value","Settings","setAdvertiserTrackingEnabled","error","reportInternalError","SegmentError","ErrorType","PluginError","initializeSDK","e","JSON","stringify","logger","warn","setDataProcessingOptions","update","_","fbSettings","integrations","trackScreenEvent","track","safeEvent","convertedName","safeName","sanitizeEventName","safeProps","currency","fb_currency","_valueToSum","purchasePrice","AppEventsLogger","logPurchase","logEvent","screen","name","fbName","sanitizedName","replace","substring","exports"],"sourceRoot":"../../src","sources":["FacebookAppEventsPlugin.ts"],"mappings":"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"}
