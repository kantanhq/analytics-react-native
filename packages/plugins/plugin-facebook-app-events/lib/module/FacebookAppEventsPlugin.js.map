{"version":3,"names":["DestinationPlugin","ErrorType","generateMapTransform","isNumber","isObject","PluginType","SegmentError","unknownToString","AppEventsLogger","Settings","screen","mapEventProps","transformMap","sanitizeValue","FB_PLUGIN_KEY","MAX_CHARACTERS_EVENT_NAME","mappedPropNames","isFBPluginSettings","settings","Object","keys","some","k","sanitizeEvent","event","properties","products","Array","isArray","productCount","fb_num_items","length","params","key","values","includes","sanitized","undefined","_logTime","messageId","event_id","_appVersion","context","app","version","FacebookAppEventsPlugin","type","destination","trackScreens","limitedDataUse","appEvents","configure","analytics","adTrackingEnabled","get","onChange","value","setAdvertiserTrackingEnabled","error","reportInternalError","PluginError","initializeSDK","e","JSON","stringify","logger","warn","setDataProcessingOptions","update","_","fbSettings","integrations","trackScreenEvent","track","safeEvent","convertedName","safeName","sanitizeEventName","safeProps","currency","fb_currency","_valueToSum","purchasePrice","logPurchase","logEvent","name","fbName","sanitizedName","replace","substring"],"sourceRoot":"../../src","sources":["FacebookAppEventsPlugin.ts"],"mappings":"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"}
