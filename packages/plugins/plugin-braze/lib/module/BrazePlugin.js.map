{"version":3,"names":["DestinationPlugin","isNumber","isString","isBoolean","isDate","PluginType","isObject","objectToString","unknownToString","deepCompare","Braze","flush","defaultProperties","network","campaign","adGroup","creative","BrazePlugin","type","destination","key","revenueEnabled","update","settings","_","brazeSettings","integrations","logPurchaseWhenRevenuePresent","sanitizeAttribute","value","Array","isArray","map","v","undefined","identify","event","identical","lastSeenTraits","traits","userId","anonymousId","changeUser","birthday","Date","isNaN","getTime","data","setDateOfBirth","getFullYear","getMonth","getDate","analytics","logger","warn","email","setEmail","firstName","setFirstName","lastName","setLastName","gender","validGenders","isValidGender","indexOf","setGender","phone","setPhoneNumber","address","city","setHomeCity","country","setCountry","appBoyTraits","Object","entries","forEach","sanitized","setCustomUserAttribute","track","eventName","revenue","extractRevenue","properties","attributionData","source","name","ad_group","ad_creative","setAttributionData","logPurchaseEvent","logCustomEvent","parseFloat","currency","length","appBoyProperties","assign","products","slice","product","productDict","productId","product_id","productRevenue","productQuantity","quantity","price","productProperties","logPurchase","String"],"sourceRoot":"../../src","sources":["BrazePlugin.tsx"],"mappings":"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"}
